
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	ВерсияСервер = ЭСЧФсервер.ВерсияКомпонентыСервер();
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	ТолькоПросмотр = ( Не РольДоступна("ИспользованиеЭСЧФПолный") И Не РольДоступна("ПолныеПрава") );
	ВерсияКлиент = ЭСЧФклиент.ВерсияКомпонентыКлиент();
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаКлиенте
Процедура ПутьКаталогаНачалоВыбора(Элемент, СтандартнаяОбработка)

	СтандартнаяОбработка = Ложь;
	
	Диалог = Новый ДиалогВыбораФайла(РежимДиалогаВыбораФайла.ВыборКаталога);
	Диалог.Каталог = Элемент.ТекстРедактирования;
	Если Диалог.Выбрать() Тогда
		Элемент.ВыделенныйТекст = Диалог.Каталог;
	КонецЕсли;

КонецПроцедуры

&НаКлиенте
Процедура ПутьКаталогаОткрытие(Элемент, СтандартнаяОбработка)
	СтандартнаяОбработка = Ложь;
	КомандаСистемы( "explorer file:" + Элемент.ТекстРедактирования )
КонецПроцедуры

&НаКлиенте
Процедура ПараметрПриИзменении(Элемент)

	Если Параметр = "connection.readTimeout" Тогда
		Значение = 300; // значение по-умолчанию
	КонецЕсли;

КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура УстановитьПараметр(Команда)

	Отказ = Ложь;
	ТекстОшибки = "";
	ЭСЧФклиент.УстановитьПараметрСервисаКлиент( Параметр, Значение, Отказ, ТекстОшибки );
	Если Отказ Тогда
		Сообщение = Новый СообщениеПользователю;
		Сообщение.Текст = ТекстОшибки;
		Сообщение.Сообщить();
	КонецЕсли;

КонецПроцедуры

&НаКлиенте
Процедура ОткрытьНастройкиАвторизации(Команда)
    
    ПолучитьФорму("РегистрСведений.ПараметрыАвторизацииНаСервере.ФормаСписка").Открыть();
    
КонецПроцедуры

&НаКлиенте
Процедура ПодключитьКомпоненту(Команда)

	Отказ = Ложь;
	Ошибка = "";
	
	ПодключитьКомпонентыДоступаКПорталуЭСФЧ(Отказ, Ошибка);
	
	Если Отказ Тогда
		Сообщение = Новый СообщениеПользователю;
		Сообщение.Текст = Ошибка;
		Сообщение.Сообщить();
	Иначе
		Сообщение = Новый СообщениеПользователю;
		Сообщение.Текст = "Компонента успешно подключена";
		Сообщение.Сообщить();
		ВерсияКлиент = ЭСЧФклиент.ВерсияКомпонентыКлиент();
	КонецЕсли;

КонецПроцедуры

&НаКлиенте
Процедура УстановитьПараметрыПроксиСервера(Команда)

	ТекстОшибки = "";
	Если Не ЭСЧФобщий.УстановитьПараметрыПроксиСервера( КонстантыНабор.АдресПроксиСервераЭСЧФ, КонстантыНабор.ПортПроксиСервераЭСЧФ, КонстантыНабор.ИмяПользователяПроксиСервераЭСЧФ
														, КонстантыНабор.ПарольПользователяПроксиСервераЭСЧФ, КонстантыНабор.ТипПроксиСервераЭСЧФ, ТекстОшибки ) Тогда
		Сообщение = Новый СообщениеПользователю;
		Сообщение.Текст = ТекстОшибки;
		Сообщение.Поле = "УстановитьПараметрыПроксиСервера"; //имя реквизита
		Сообщение.Сообщить();
	КонецЕсли;

КонецПроцедуры

#КонецОбласти
